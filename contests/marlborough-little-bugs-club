<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-form-validator/2.3.26/jquery.form-validator.min.js"></script>
<div class="jobs_banner text-center">
    <h3>Contests</h3>
    <p>explore • enjoy • shop</p>
</div>
<div class="margin_20"></div>
<div class="content_container main_container mobile_padding">
    <div class="margin_25_across">
        <div class="row">
            <div class="col-md-12">
                <div id="events_not_empty_section">
                    <div class="" id="contest_container">
                        <script id="contest_template" type="x-tmpl-mustache">
                            <div class="promo-details">
                                <p class="hidden_now" id="succes_msg">Thank you! Your entry has been received.</p>
                                <div class="event-image">
                                    <img class="contest banner" src="{{alt_photo_url}}">
                                </div>
                                <br>
                                <div class="event-description">
                                    {{{ rich_description }}}
                                </div>
                                <br>
                            </div> 
                            <form id="contest_form">
                                // <input id="property_id" name="contest[property_id]" type="hidden" value="{{property_id}}"/>
                                // <input id="contest_id" name="contest[contest_id]" type="hidden"  value="{{id}}" />
                                // <input type="hidden" name="cm-name" id="cm-name" />
                                // <div class="row ">
                                //     <div class="col-md-4 margin_30">
                                //         <label for="first_name">First Name</label>  
                                //         <input class="form-control" id="first_name" name="contest[first_name]" type="text" required data-validation="required" tabindex="1"/>
                                //     </div>
                                //     <div class="col-md-4 margin_30">
                                //         <label for="last_name">Last Name</label>  
                                //         <input class="form-control" id="last_name" name="contest[last_name]" type="text" required data-validation="required" tabindex="2"/>
                                //     </div>
                                //     <div class="col-md-4 margin_30">
                                //         <label for="phone">Phone Number</label>  
                                //         <input class="form-control" id="phone" name="contest[phone]" type="text" required data-validation="required" tabindex="3"/>    
                                //     </div>
                                // </div>
                                // <br class="hidden_phone">
                                // <div class="row">
                                //     <div class="col-md-4">
                                //         <label for="postal_code">Postal Code</label>  
                                //         <input class="form-control" id="postal_code" name="contest[postal_code]" type="text" required data-validation="required" tabindex="4"/>
                                //     </div>
                                //     <div class="col-md-4">
                                //         <label for="city">City</label>  
                                //         <input class="form-control" id="city" name="contest[city]" type="text" required data-validation="required" tabindex="5"/>    
                                //     </div>
                                //     <div class="col-md-4">
                                //         <label for="email">Email</label> 
                                //         <input class="form-control" id="email" name="contest[email]" type="email" required data-validation-regexp="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$" data-validation-error-msg="Please enter a valid email address" data-validation="custom" tabindex="6"/>
                                //     </div>
                                // </div>
                                // <br>
                                // <div class="row">
                                //     <div class="col-md-12">
                                //         <label class="agree">
                                //             <input id="newsletter_signup" type="checkbox" name="contest[newsletter]" tabindex="7"/> 
                                //             Yes, I would like to receive information about events and promotions from The CORE.
                                //         </label>
                                //         <br/><br/>
                                //     </div>
                                // </div>
                                // <div class="row">
                                //     <div class="col-md-12">
                                      
                                //         <br/><br/>
                                //         <button class="contest_btn animated_btn newsletter_btn" tabindex="9">Submit</button>
                                //         <br/><br/>
                                //         <br/><br/>
                                //     </div>
                                // </div>
                                <input id="property_id" name="contest[property_id]" type="hidden" value="{{property_id}}"/>
                <input id="contest_id" name="contest[contest_id]" type="hidden"  value="{{id}}" />
                <input type="hidden" name="cm-name" id="cm-name" />
                <div class="row">
                    <div class="col-md-6">
                        <label for="first_name">Little Bugs Name</label>  
                        <input class="form-control" type="text" id="first_name" name="contest[first_name]" value="" required data-validation="required"/>
                    </div>
                    <div class="col-md-6"></div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <label for="age">Little Bugs Age</label> 
                        <input class="form-control" type="text" id="age" name="contest[age]" value="" required data-validation="required"/>
                    </div>
                    <div class="col-md-6"></div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <label>Little Bugs Birthday</label> 
                        <input type="text" id="birthday" name="contest[birthday]" value="" class="date" style="display:none;"/>
                    </div>
                    <div class="col-md-4">
                        <select id="birthday_year" required data-validation="required">
                            <option value="">Year</option>
                            <option value="2017">2017</option>
                            <option value="2016">2016</option>
                            <option value="2015">2015</option>
                            <option value="2014">2014</option>
                            <option value="2013">2013</option>
                            <option value="2012">2012</option>
                            <option value="2011">2011</option>
                            <option value="2010">2010</option>
                            <option value="2009">2009</option>
                            <option value="2008">2008</option>
                            <option value="2007">2007</option>
                            <option value="2006">2006</option>
                            <option value="2005">2005</option>
                            <option value="2004">2004</option>
                            <option value="2003">2003</option>
                            <option value="2002">2002</option>
                            <option value="2001">2001</option>
                            <option value="2000">2000</option>
                            <option value="1999">1999</option>
                            <option value="1998">1998</option>
                            <option value="1997">1997</option>
                            <option value="1996">1996</option>
                            <option value="1995">1995</option>
                        </select>    
                    </div>
                    <div class="col-md-4">
                        <select id="birthday_month" required data-validation="required">
                            <option value="">Month</option>
                            <option value="Jan">Jan</option>
                            <option value="Feb">Feb</option>
                            <option value="Mar">Mar</option>
                            <option value="Apr">Apr</option>
                            <option value="May">May</option>
                            <option value="Jun">Jun</option>
                            <option value="Jul">Jul</option>
                            <option value="Aug">Aug</option>
                            <option value="Sep">Sep</option>
                            <option value="Oct">Oct</option>
                            <option value="Nov">Nov</option>
                            <option value="Dec">Dec</option>
                        </select>
                    </div>
                    <div class="col-md-4">
                        <select id="birthday_day" required data-validation="required">
                            <option value="">Day</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                            <option value="13">13</option>
                            <option value="14">14</option>
                            <option value="15">15</option>
                            <option value="16">16</option>
                            <option value="17">17</option>
                            <option value="18">18</option>
                            <option value="19">19</option>
                            <option value="20">20</option>
                            <option value="21">21</option>
                            <option value="22">22</option>
                            <option value="23">23</option>
                            <option value="24">24</option>
                            <option value="25">25</option>
                            <option value="26">26</option>
                            <option value="27">27</option>
                            <option value="28">28</option>
                            <option value="29">29</option>
                            <option value="30">30</option>
                            <option value="31">31</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <label for="notes">Parent/Guardian Name</label> 
                        <input class="form-control" type="text" id="notes" name="contest[notes]" value="" required data-validation="required"/>
                    </div>
                    <div class="col-md-6"></div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <label for="phone">Phone Number</label>  
                        <input class="form-control" id="phone" name="contest[phone]" type="text" required data-validation="required"/>
                    </div>
                    <div class="col-md-6"></div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <label for="email">Email</label> 
                        <input class="form-control" id="email" name="contest[email]" type="email" required data-validation-regexp="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$" data-validation-error-msg="The input value is incorrect email address" data-validation="custom" />
                    </div>
                    <div class="col-md-6"></div>
                </div>
                <br/>
                
                <div class="row">
                    <div class="col-md-12">
                        <input class="btn btn-success" name="commit" type="submit" value="Join Little Bug Club" style="width:325px; height: 45px;"/> 
                        <br /><br />
                        <p class="" id="succes_msg" style="display:none">Thank you! Your entry has been received.</p>
                    </div>
                </div>
                            </form>
                
                        </script>
                    </div>
                </div>
                <div id="events_empty_section" style="display:none;">
                    <p>Check back later for exciting contest details!</p>
                </div>
            </div>
        </div>  
    </div>
</div>
 
<script>
    $(document).ready(function(e) {
        init(e);
        function renderPageData(){
            var pathArray = window.location.pathname.split( '/' );
            var slug = pathArray[pathArray.length-1];
            var contest_details = getContestBySlug(slug);
            renderContest("#contest_container", '#contest_template', contest_details)

            show_content();
            
            $.validate();
            
            $('#contest_form').submit(function(e){
                e.preventDefault();
                $('.contest_btn').prop('disabled', true);
                submit_contest(slug);
                $('html, body').animate({scrollTop : 0},800);
            });
        }
        
        function renderContest(container, template, collection){
            var item_list = [];
            var item_rendered = [];
            var template_html = $(template).html();
            Mustache.parse(template_html);   // optional, speeds up future uses
            if(collection !== null && collection !== undefined) {
                collection.alt_photo_url = getImageURL(collection.photo_url);
                collection.property_name = getPropertyDetails().name;
                var rendered = Mustache.render(template_html,collection);
                item_rendered.push(rendered);
                
                $(container).show();
                $(container).html(item_rendered.join(''));
            }
            else {
                $("#events_empty_section").show();
            }
        }

        loadMallDataCached(renderPageData);
    });
</script>

